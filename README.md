# 飞书多维表格数据查看器

这是一个基于Node.js的网站应用，用于管理和展示飞书多维表格数据，主要用于课程管理和学员信息跟踪。

## 功能特点

### 用户管理
- 用户注册与登录系统
- 基于会话的身份验证
- 安全的密码加密存储

### 数据管理
- 读取和展示飞书多维表格数据
- 本地数据缓存，提升访问速度
- 支持手动更新数据同步
- 响应式设计，支持移动端查看

### 学员管理
- 添加新学员信息
- 更新学员状态和信息
- 按课程查看学员列表
- 支持多种招生渠道记录
- 灵活的意向上课时间管理

### 课程管理
- 创建新课程
- 课程信息记录（时间、地点、时长）
- 学员课程关联管理

### 收益分析
- 收益数据可视化展示
- 支持多种筛选条件
- 导出Excel功能
- AI智能分析收益数据
- 获取专业财务建议和预测

### 系统功能
- 完整的操作日志记录
- 支持日志按日期筛选查看
- 数据安全存储
- 实时数据同步

## 项目结构

```
├── app.js              # 主应用文件
├── public/            # 静态资源目录
│   ├── index.html     # 学员管理页面
│   ├── classes.html   # 课程管理页面
│   └── income.html    # 收益管理页面
├── views/             # 视图模板
│   ├── login.html     # 登录页面
│   └── register.html  # 注册页面
├── bd.json           # 飞书数据缓存
├── classes.json      # 课程数据存储
├── students.json     # 学员数据存储
├── users.json        # 用户数据存储
├── .env              # 环境变量配置文件
└── operations.log    # 操作日志文件
```

## 运行要求

- Node.js 14.0.0 或更高版本
- npm 或 yarn 包管理器
- 现代浏览器（支持ES6+）
- 火山方舟AI API密钥（用于AI分析功能）

## 安装步骤

1. 克隆或下载本项目到本地

2. 安装依赖包：
```bash
npm install
```

3. 配置环境变量：
   - 复制env.example为.env
   - 在.env文件中填入您的火山方舟API密钥和模型端点ID

4. 运行应用：
```bash
node app.js
```

5. 打开浏览器访问：
```
http://localhost:4000
```

## 技术栈

### 后端
- Node.js + Express：服务器框架
- express-session：会话管理
- bcryptjs：密码加密
- @larksuiteoapi/node-sdk：飞书API集成
- openai：火山方舟AI API客户端
- dotenv：环境变量管理

### 前端
- 原生 JavaScript
- HTML5 + CSS3
- 响应式设计

### 数据存储
- 本地JSON文件存储
- 飞书多维表格API

### AI集成
- 火山方舟AI模型
- 兼容OpenAI接口

## 安全说明
- 所有密码都经过加密存储
- 使用会话机制保护API访问
- 关键配置信息通过环境变量管理
- AI API密钥安全存储

## 注意事项

- 确保您已经在飞书开放平台创建了应用
- 确保您的应用已获得必要的权限
- 请妥善保管您的 App ID 和 App Secret
- 请妥善保管您的火山方舟API密钥
- 定期备份本地数据文件
- 建议在生产环境中使用更安全的数据库存储方案

## 开发计划
- [x] 添加AI分析功能
- [ ] 添加数据库支持
- [ ] 实现更细粒度的权限控制
- [ ] 添加自动备份功能
- [ ] 优化性能和用户体验 